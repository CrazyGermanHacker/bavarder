<div class="hd wrapper3">
    <div style="text-align: left;">
        <button class="hdiconbtn" id="signinbtn" style="background: white; border: 0 none; color: black; box-shadow: 0 0 0 white; padding: 0; margin: 0;"  onclick="show_signin_card()">
            <i class="material-icons" style="font-size: 32px;">person</i>
        </button>
        <div  style="left: 16px; position: fixed; display: none; top: 48px" id="gsignininfo">
            <div class="g-signin2" data-onsuccess="onSignIn" data-theme="dark"></div>
        </div>
    </div>
    <h2 style="text-align: center;">Bavarder</h2>
    <div style="text-align: right;">
        <i class="material-icons" style="font-size: 32px;" onclick="show_info_cards()">more_vert</i>
        <div class="info" id="info">
            <div id="info0" onclick="opensettings()">Settings</div>
            <div id="info1" onclick="window.location.href = 'https://github.com/storm246/bavarder'">
                Visit Github
            </div>
        </div>
    </div>
</div>

<div class="scroll" onscroll="osc(0,0)">
    <div class="chatbutton" style="color: #d32f2f; text-align: center;" onclick="add_chat_action()">
        <h3><i class="material-icons" style="font-size: 32px">add_circle</i>Add Chat</h3>
    </div>
    <div id="users"></div>
</div>

<div class="add_chat_screen action">
    <div class="hd">
        <h2><i class="material-icons" style="font-size: 32px" onclick="back_add_chat_action()">arrow_back</i>Add Chat</h2>
    </div>
    <div class="card">
        <br />
        <form id="add_form" action="/" method="POST">
            <input type="text" name="user" placeholder="username" id="unameip" />
            <input type="hidden" name="email" id="email"/>
            <br />
            <br />
            <button type="submit" id="add_btn" style="background: lightgrey; color: black" disabled><b>ADD</b></button>
        </form>
    </div>
</div>

<div class="settings_screen action">
    <div class="hd">
        <h2><i class="material-icons" style="font-size: 32px" onclick="back_settings_action()">arrow_back</i>Settings</h2>
    </div>
    <div class="scroll" id="settings_main">
        <div class="card" id="settings-general">
            <h3>General</h3>
            <br />
            <form action="/changesetting" method="POST">
                <div>
                    <h5>Theme</h5>
                    <label>Enable Dark Theme
                        <input class="simple-switch-input" id="darktoggle" name="dark" type="checkbox"/><span class="simple-switch dark"></span>
                    </label>
                    <br />
                    <label>Use Noir Mode (Deeper blacks; Saves power on devices with OLED and AMOLED screens)
                        <input class="simple-switch-input" id="noirmode" name="noirmode" type="checkbox"/><span class="simple-switch dark"></span>
                    </label>
                </div>
                <input type="hidden" name="email" id="emailform" />
                <br />
                <button type="submit" id="applybutton" style="color: white; background: #d32f2f"><b>APPLY</b></button>
            </form>
        </div>
    </div>
    <div class="card" id="signinmsg">
        <h3>You must be signed in to change settings.</h3>
    </div>
</div>

<div class="chat_screen action">
    <div class="hd">
        <h2><i class="material-icons" style="font-size: 32px" onclick="back_chat_action()">arrow_back</i><b id="user"></b></h2>
    </div>
    <div id="messages" class="scroll">

    </div>
    <div class="wrappermsg">
        <div class="messagebar">
            <form id="messagefield" autocomplete="off">
                <input type="text" name="message" id="messagefld" style="border: 0 none; margin-top: 8px; font-size: 16px; border-radius: 24px; width: 100%; box-shadow: 0 6px 12px #00000061; padding-top: 12px; padding-bottom: 12px; padding-left: 4px;" placeholder="Message" />
                <input type="hidden" name="email" id="emailform2" />
                <input type="hidden" name="to" id="toform" />
                <input name="messagecount" id="messagecount" type="hidden"/>
            </form>
        </div>
        <div class="fib"  onclick="waittosend()">
            <i class="material-icons" style="font-size: 32px">send</i>
        </div>
    </div>
</div>
<script>
        function onSignIn(googleUser){
                // Useful data for your client-side scripts:
            var profile = googleUser.getBasicProfile();
            console.log("ID: " + profile.getId()); // Don't send this directly to your server!
            console.log('Full Name: ' + profile.getName());
            console.log('Given Name: ' + profile.getGivenName());
            console.log('Family Name: ' + profile.getFamilyName());
            console.log("Image URL: " + profile.getImageUrl());
            console.log("Email: " + profile.getEmail());
    
            // The ID token you need to pass to your backend:
            var id_token = googleUser.getAuthResponse().id_token;
            console.log("ID Token: " + id_token);
            document.getElementById("settings_main").style.display="inline-block";
            document.getElementById("emailform").value=profile.getEmail()
            document.getElementById("emailform2").value=profile.getEmail()
            document.getElementById("email").value=profile.getEmail()
            document.getElementById("signinmsg").style.display="none";
            document.getElementById("signinbtn").innerHTML="<img src="+profile.getImageUrl()+" style='width: 32; margin-left: 8px; border-radius: 16px'>"
            getusersettings(profile.getEmail())
        };
    </script>
